#ifndef _MAP_DH_
#define _MAP_DH_

struct LevelInfo
{
    int LevelNum;
    // If we start in the Outpost, we set this on MAP01 to tell ourselves that
    // we need to replace the placeholder info with real info.
    bool NeedsRealInfo;
    str LumpName;
    str NiceName;
    
    int MaxMonstersKilled;
    int MaxItemsFound;
    int MaxSecretsFound;
    int ShortestTime;
    
    int TotalMonsters;
    int TotalItems;
    int TotalSecrets;
    int Par;
    int Sucks;
    
    bool KillBonus;
    bool ItemsBonus;
    bool SecretsBonus;
    bool AllBonus;
    bool ParBonus;
};

struct LocalLevelInfo
{
    unsigned int CurrentEvent;
};

extern
{
    variable static LevelInfo *CurrentLevel;
    variable static LevelInfo *KnownLevels;
    variable static int NumKnownLevels;
    variable static int LastVisitedLevel;
    variable map_array LocalLevelInfo MapSpecialInfo;
};

extern
{
    script void MapInit() open;
    script void MapLoop();
    script void SetupMapEvent();
    script void MegaBossEvent();
    script void EnvironmentalHazard();
    script void ThermonuclearBomb();
    script void OneMonsterEvent();
    script void RainbowSectors();
    script void SetupOutpostEvent();
};

extern "ACS"
{
    script void MapExit(bool) @ MAP_EXIT_SCRIPTNUM;
};

extern
{
    function int FindLevelInfoIndex(int = 0);
};

#endif
